{"version":3,"sources":["user.es6"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;;;IAGqB,I;;;;;;;;;;;;;QASf,G;;;;;AAAA,W,GAAM,gBAAM,kBAAN,CAAyB,EAAzB,C;;eACG,QAAQ,GAAR,CAAY,EAAC,KAAK,GAAN,EAAW,MAAM,IAAjB,EAAZ,C;;;;;;;;;;;;;;;;;;;;;;yEAIe,G;QACxB,O;;;;;;eAAgB,QAAQ,OAAR,CAAgB,EAAC,KAAK,GAAN,EAAhB,C;;;AAAhB,e;;YACC,O;;;;;0CAAgB,I;;;;eACR,QAAQ,I;;;;;;;;;;;;;;;;;;;;;;;;AAjBF,I,CAEb,M,GAAS;AACf,OAAM,MADS;AAEf,MAAK;AAFU,C;kBAFI,I;;IAuBf,O;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,O,CAEE,M,GAAS;AACf,MAAK,EAAC,OAAO,MAAR,EAAgB,QAAQ,IAAxB,EAA8B,SAAS,IAAvC,EADU;AAEf,OAAM;AAFS,C","file":"user.js","sourcesContent":["import Model from '../core/model'\r\nimport Utils from '../core/utils'\r\n\r\n\r\nexport default class User extends Model {\r\n\r\n\tstatic schema = {\r\n\t\tname: String,\r\n\t\tage: Number,\r\n\t}\r\n\r\n\r\n\tasync startSession() {\r\n\t\tlet key = Utils.createRandomString(64)\r\n\t\treturn await Session.add({key: key, user: this})\r\n\t}\r\n\r\n\r\n\tstatic async getBySessionKey(key) {\r\n\t\tlet session = await Session.findOne({key: key})\r\n\t\tif (!session) return null\r\n\t\treturn await session.user\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass Session extends Model {\r\n\r\n\tstatic schema = {\r\n\t\tkey: {$type: String, $index: true, $unique: true},\r\n\t\tuser: User,\r\n\t}\r\n\r\n}\r\n\r\n//\r\n// (async function () {\r\n// \ttry {\r\n//\r\n// \t\tlet user = await User.add({name: 'Ашот', age: 3333})\r\n//\r\n// \t\tlet users = await User.have({name: 'Ашот'})\r\n// \t\tconsole.log(users)\r\n//\r\n// \t} catch (e) {\r\n// \t\tconsole.error(e)\r\n// \t}\r\n// })()\r\n\r\n\r\n\r\n"]}