{"version":3,"sources":["task.es6"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;IAGqB,I;AAEpB,eAAY,UAAZ,EAAwB,OAAxB,EAAiC;AAAA;;AAChC,OAAK,UAAL,GAAkB,UAAlB;AACA,OAAK,MAAL,GAAc,QAAQ,MAAtB;AACA,OAAK,MAAL,GAAc,QAAQ,MAAtB;;AAEA,OAAK,IAAL,GAAY,KAAZ;AACA,OAAK,KAAL,GAAa,IAAb;AACA,OAAK,MAAL,GAAc,IAAd;AACA;;;;0BAGO,M,EAAQ;AACf,OAAI,KAAK,IAAT,EAAe;AACf,QAAK,MAAL,GAAc,MAAd;AACA,QAAK,IAAL,GAAY,IAAZ;AACA;;;yBAGM,K,EAAO;AACb,OAAI,KAAK,IAAT,EAAe;AACf,QAAK,KAAL,GAAa,KAAb;AACA,QAAK,IAAL,GAAY,IAAZ;AACA;;;;;QAKK,M;;;;;;;eAAe,iBAAO,UAAP,CAAkB,KAAK,MAAvB,EAA+B,KAAK,MAApC,EAA4C,KAAK,UAAjD,C;;;AAAf,c;;;;;;;;AAEJ,YAAI,EAAE,yCAAF,CAAJ,EAAkC;AACjC,iBAAQ,KAAR;AACA,uBAAQ,uBAAa,CAAb,EAAgB,EAAhB,CAAR;AACA;AACD,aAAK,MAAL;;;AAED,aAAK,OAAL,CAAa,MAAb;;;;;;;;;;;;;;;;;;2BAIQ;AACR,UAAO;AACN,WAAO,KAAK,KADN;AAEN,YAAQ,KAAK;AAFP,IAAP;AAIA;;;;;;kBA9CmB,I","file":"task.js","sourcesContent":["import ApiError from './errors/api-error'\r\nimport Server from './server'\r\n\r\n\r\nexport default class Task {\r\n\r\n\tconstructor(connection, options) {\r\n\t\tthis.connection = connection\r\n\t\tthis.method = options.method\r\n\t\tthis.params = options.params\r\n\r\n\t\tthis.done = false\r\n\t\tthis.error = null\r\n\t\tthis.result = null\r\n\t}\r\n\r\n\r\n\tresolve(result) {\r\n\t\tif (this.done) return\r\n\t\tthis.result = result\r\n\t\tthis.done = true\r\n\t}\r\n\r\n\r\n\treject(error) {\r\n\t\tif (this.done) return\r\n\t\tthis.error = error\r\n\t\tthis.done = true\r\n\t}\r\n\r\n\r\n\tasync run() {\r\n\t\ttry {\r\n\t\t\tvar result = await Server.callMethod(this.method, this.params, this.connection)\r\n\t\t} catch (error) {\r\n\t\t\tif (!(error instanceof ApiError)) {\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t\terror = new ApiError(0, '')\r\n\t\t\t}\r\n\t\t\tthis.reject(error)\r\n\t\t}\r\n\t\tthis.resolve(result)\r\n\t}\r\n\r\n\r\n\ttoJSON() {\r\n\t\treturn {\r\n\t\t\terror: this.error,\r\n\t\t\tresult: this.result\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n"]}